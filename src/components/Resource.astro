---
type Props = {
  title: string;
  icon: 'mail';
  link:
    | {
        kind?: 'default';
        href: string;
        label: string;
      }
    | {
        kind: 'mailto';
        name: string;
        domain: string;
      };
};

const { icon, link, title } = Astro.props;
---

<div class="flex flex-col gap-2">
  <h5 class="text-lg font-semibold">{title}</h5>
  <div class="flex items-center gap-2 text-sm text-gray-700 dark:text-gray-300">
    {
      (
        <svg
          class="h-4 w-4"
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width={1.5}
          stroke="currentColor"
        >
          {icon === 'mail' && (
            <Fragment>
              <path d="M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z" />
              <path d="M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z" />
            </Fragment>
          )}
        </svg>
      )
    }
    {
      link.kind === 'mailto' ? (
        <button
          class="mailto flex before:content-[attr(data-name)] after:content-[attr(data-domain)] hover:underline"
          data-name={link.name}
          data-domain={link.domain}
          type="button"
        >
          @
        </button>
      ) : (
        <a class="flex hover:underline" href={link.href} target="_blank">
          {link.label}
        </a>
      )
    }
  </div>
</div>
<script>
  document.querySelectorAll<HTMLButtonElement>('.mailto').forEach((button) => {
    button.addEventListener('click', function () {
      window.location.href = `mailto:${this.dataset.name}@${this.dataset.domain}`;
    });
  });
</script>
