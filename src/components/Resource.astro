---
type Props = {
  title: string;
  link:
    | {
        kind?: 'default';
        href: string;
        label: string;
      }
    | {
        kind: 'mailto';
        name: string;
        domain: string;
      };
};

const { link, title } = Astro.props;
---

<div class="flex flex-col gap-2">
  <h5 class="text-lg font-semibold">{title}</h5>
  <div class="text-sm text-gray-700 dark:text-gray-300">
    {
      link.kind === 'mailto' ? (
        <button
          class="mailto flex before:content-[attr(data-name)] after:content-[attr(data-domain)]"
          data-name={link.name}
          data-domain={link.domain}
          type="button"
        >
          @
        </button>
      ) : (
        <a class="flex" href={link.href} target="_blank">
          {link.label}
        </a>
      )
    }
  </div>
</div>
<script>
  document.querySelectorAll<HTMLButtonElement>('.mailto').forEach((button) => {
    button.addEventListener('click', function () {
      window.location.href = `mailto:${this.dataset.name}@${this.dataset.domain}`;
    });
  });
</script>
